# Gold-Seeker éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»Gold-Seekeråœ°çƒåŒ–å­¦æ‰¾çŸ¿é¢„æµ‹æ™ºèƒ½å¹³å°çš„éƒ¨ç½²æ–¹æ³•å’Œæœ€ä½³å®è·µã€‚

## ğŸ“‹ ç›®å½•

- [éƒ¨ç½²æ¦‚è§ˆ](#éƒ¨ç½²æ¦‚è§ˆ)
- [æœ¬åœ°éƒ¨ç½²](#æœ¬åœ°éƒ¨ç½²)
- [æœåŠ¡å™¨éƒ¨ç½²](#æœåŠ¡å™¨éƒ¨ç½²)
- [å®¹å™¨åŒ–éƒ¨ç½²](#å®¹å™¨åŒ–éƒ¨ç½²)
- [äº‘å¹³å°éƒ¨ç½²](#äº‘å¹³å°éƒ¨ç½²)
- [é›†ç¾¤éƒ¨ç½²](#é›†ç¾¤éƒ¨ç½²)
- [ç›‘æ§å’Œç»´æŠ¤](#ç›‘æ§å’Œç»´æŠ¤)
- [å®‰å…¨é…ç½®](#å®‰å…¨é…ç½®)

## ğŸŒ éƒ¨ç½²æ¦‚è§ˆ

### éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è´Ÿè½½å‡è¡¡å™¨                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  WebæœåŠ¡å™¨  â”‚  APIæœåŠ¡å™¨  â”‚  ä»»åŠ¡é˜Ÿåˆ—  â”‚  ç¼“å­˜æœåŠ¡å™¨    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ (Gold-Seekerå®ä¾‹)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®åº“é›†ç¾¤  â”‚  æ–‡ä»¶å­˜å‚¨  â”‚  å¯¹è±¡å­˜å‚¨  â”‚  å¤‡ä»½å­˜å‚¨      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éƒ¨ç½²ç±»å‹

1. **å•æœºéƒ¨ç½²**: é€‚åˆå¼€å‘å’Œå°è§„æ¨¡ä½¿ç”¨
2. **æœåŠ¡å™¨éƒ¨ç½²**: é€‚åˆä¸­å°è§„æ¨¡ç”Ÿäº§ç¯å¢ƒ
3. **å®¹å™¨åŒ–éƒ¨ç½²**: é€‚åˆå¾®æœåŠ¡æ¶æ„
4. **äº‘å¹³å°éƒ¨ç½²**: é€‚åˆå¤§è§„æ¨¡å¼¹æ€§éƒ¨ç½²
5. **é›†ç¾¤éƒ¨ç½²**: é€‚åˆé«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡

## ğŸ’» æœ¬åœ°éƒ¨ç½²

### 1. ç³»ç»Ÿè¦æ±‚

#### æœ€ä½é…ç½®
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.14+, Linux (Ubuntu 18.04+)
- **CPU**: 2æ ¸å¿ƒ
- **å†…å­˜**: 4GB RAM
- **å­˜å‚¨**: 10GBå¯ç”¨ç©ºé—´
- **Python**: 3.9+

#### æ¨èé…ç½®
- **æ“ä½œç³»ç»Ÿ**: Windows 11, macOS 12+, Linux (Ubuntu 20.04+)
- **CPU**: 4æ ¸å¿ƒ+
- **å†…å­˜**: 8GB+ RAM
- **å­˜å‚¨**: 50GB+ SSD
- **GPU**: æ”¯æŒCUDAçš„GPUï¼ˆå¯é€‰ï¼‰

### 2. å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/your-username/Gold-Seeker.git
cd Gold-Seeker

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv gold-seeker-env
source gold-seeker-env/bin/activate  # Linux/Mac
# æˆ–
gold-seeker-env\Scripts\activate  # Windows

# 3. å®‰è£…ä¾èµ–
pip install -e ".[all]"

# 4. éªŒè¯å®‰è£…
gold-seeker --version
gold-seeker example --dataset synthetic
```

### 3. é…ç½®æ–‡ä»¶

```yaml
# config/local.yaml
project:
  name: "æœ¬åœ°Gold-Seekerå®ä¾‹"
  environment: "development"

data:
  data_dir: "./data"
  cache_dir: "./cache"
  temp_dir: "./temp"

analysis:
  parallel: true
  n_jobs: 4
  chunk_size: 1000

logging:
  level: "INFO"
  file: "./logs/gold_seeker.log"
  console: true

performance:
  memory_limit: "4GB"
  use_gpu: false
```

### 4. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨Webç•Œé¢
gold-seeker web --host 0.0.0.0 --port 8080

# å¯åŠ¨APIæœåŠ¡
gold-seeker api --host 0.0.0.0 --port 8000

# å¯åŠ¨åå°ä»»åŠ¡
gold-seeker worker --n-workers 2
```

## ğŸ–¥ï¸ æœåŠ¡å™¨éƒ¨ç½²

### 1. ç³»ç»Ÿå‡†å¤‡

#### Ubuntu/Debian

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt install -y python3.10 python3.10-venv python3.10-dev
sudo apt install -y build-essential cmake pkg-config
sudo apt install -y gdal-bin libgdal-dev libgeos-dev libproj-dev
sudo apt install -y nginx supervisor redis-server

# å®‰è£…Node.jsï¼ˆç”¨äºWebç•Œé¢ï¼‰
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs
```

#### CentOS/RHEL

```bash
# å®‰è£…EPELä»“åº“
sudo yum install -y epel-release

# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo yum install -y python3 python3-devel
sudo yum install -y gcc gcc-c++ cmake
sudo yum install -y gdal gdal-devel geos geos-devel proj proj-devel
sudo yum install -y nginx supervisor redis

# å®‰è£…Node.js
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs
```

### 2. åº”ç”¨éƒ¨ç½²

```bash
# åˆ›å»ºåº”ç”¨ç”¨æˆ·
sudo useradd -m -s /bin/bash gold-seeker
sudo usermod -aG sudo gold-seeker

# åˆ‡æ¢åˆ°åº”ç”¨ç”¨æˆ·
sudo su - gold-seeker

# å…‹éš†ä»£ç 
git clone https://github.com/your-username/Gold-Seeker.git
cd Gold-Seeker

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3.10 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -e ".[production]"
```

### 3. é…ç½®æ–‡ä»¶

```yaml
# config/production.yaml
project:
  name: "ç”Ÿäº§Gold-Seekerå®ä¾‹"
  environment: "production"

data:
  data_dir: "/var/lib/gold-seeker/data"
  cache_dir: "/var/lib/gold-seeker/cache"
  temp_dir: "/tmp/gold-seeker"

database:
  type: "postgresql"
  host: "localhost"
  port: 5432
  name: "gold_seeker"
  user: "gold_seeker"
  password: "${DB_PASSWORD}"

redis:
  host: "localhost"
  port: 6379
  db: 0

analysis:
  parallel: true
  n_jobs: 8
  chunk_size: 5000

logging:
  level: "WARNING"
  file: "/var/log/gold-seeker/gold_seeker.log"
  console: false
  max_size: "100MB"
  backup_count: 10

security:
  secret_key: "${SECRET_KEY}"
  encryption: true
  ssl_required: true

performance:
  memory_limit: "16GB"
  use_gpu: true
  gpu_device: "cuda:0"
```

### 4. æœåŠ¡é…ç½®

#### Nginxé…ç½®

```nginx
# /etc/nginx/sites-available/gold-seeker
server {
    listen 80;
    server_name your-domain.com;
    
    # é‡å®šå‘åˆ°HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    # SSLé…ç½®
    ssl_certificate /etc/ssl/certs/your-domain.crt;
    ssl_certificate_key /etc/ssl/private/your-domain.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
    
    # é™æ€æ–‡ä»¶
    location /static/ {
        alias /home/gold-seeker/Gold-Seeker/web/static/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # APIä»£ç†
    location /api/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # Webç•Œé¢ä»£ç†
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### Supervisoré…ç½®

```ini
# /etc/supervisor/conf.d/gold-seeker.conf
[program:gold-seeker-api]
command=/home/gold-seeker/Gold-Seeker/venv/bin/gold-seeker api --host 127.0.0.1 --port 8000
directory=/home/gold-seeker/Gold-Seeker
user=gold-seeker
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/gold-seeker/api.log
environment=PATH="/home/gold-seeker/Gold-Seeker/venv/bin"

[program:gold-seeker-web]
command=/home/gold-seeker/Gold-Seeker/venv/bin/gold-seeker web --host 127.0.0.1 --port 8080
directory=/home/gold-seeker/Gold-Seeker
user=gold-seeker
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/gold-seeker/web.log
environment=PATH="/home/gold-seeker/Gold-Seeker/venv/bin"

[program:gold-seeker-worker]
command=/home/gold-seeker/Gold-Seeker/venv/bin/gold-seeker worker --n-workers 4
directory=/home/gold-seeker/Gold-Seeker
user=gold-seeker
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/gold-seeker/worker.log
environment=PATH="/home/gold-seeker/Gold-Seeker/venv/bin"
```

### 5. å¯åŠ¨æœåŠ¡

```bash
# åˆ›å»ºå¿…è¦ç›®å½•
sudo mkdir -p /var/lib/gold-seeker/{data,cache,temp}
sudo mkdir -p /var/log/gold-seeker
sudo chown -R gold-seeker:gold-seeker /var/lib/gold-seeker
sudo chown -R gold-seeker:gold-seeker /var/log/gold-seeker

# å¯ç”¨Nginxç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/gold-seeker /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx

# å¯åŠ¨SupervisoræœåŠ¡
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl start gold-seeker:*
```

## ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²

### 1. Dockerfile

```dockerfile
# Dockerfile
FROM python:3.10-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    build-essential \
    cmake \
    pkg-config \
    gdal-bin \
    libgdal-dev \
    libgeos-dev \
    libproj-dev \
    && rm -rf /var/lib/apt/lists/*

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV GDAL_CONFIG /usr/bin/gdal-config
ENV CPLUS_INCLUDE_PATH /usr/include/gdal
ENV C_INCLUDE_PATH /usr/include/gdal

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .
COPY setup.py .
COPY README.md .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# å®‰è£…åº”ç”¨
RUN pip install -e .

# åˆ›å»ºérootç”¨æˆ·
RUN useradd -m -u 1000 gold-seeker
USER gold-seeker

# æš´éœ²ç«¯å£
EXPOSE 8000 8080

# å¯åŠ¨å‘½ä»¤
CMD ["gold-seeker", "api", "--host", "0.0.0.0", "--port", "8000"]
```

### 2. Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  gold-seeker-api:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DB_HOST=postgres
      - REDIS_HOST=redis
      - SECRET_KEY=${SECRET_KEY}
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

  gold-seeker-web:
    build: .
    command: ["gold-seeker", "web", "--host", "0.0.0.0", "--port", "8080"]
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=postgres
      - REDIS_HOST=redis
    volumes:
      - ./data:/app/data
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

  gold-seeker-worker:
    build: .
    command: ["gold-seeker", "worker", "--n-workers", "4"]
    environment:
      - DB_HOST=postgres
      - REDIS_HOST=redis
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

  postgres:
    image: postgres:14
    environment:
      - POSTGRES_DB=gold_seeker
      - POSTGRES_USER=gold_seeker
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    restart: unless-stopped

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/ssl
    depends_on:
      - gold-seeker-api
      - gold-seeker-web
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

### 3. éƒ¨ç½²å‘½ä»¤

```bash
# æ„å»ºå’Œå¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f gold-seeker-api

# æ‰©å±•æœåŠ¡
docker-compose up -d --scale gold-seeker-worker=4

# æ›´æ–°æœåŠ¡
docker-compose pull
docker-compose up -d
```

## â˜ï¸ äº‘å¹³å°éƒ¨ç½²

### 1. AWSéƒ¨ç½²

#### ECSéƒ¨ç½²

```yaml
# aws-ecs-task-definition.json
{
  "family": "gold-seeker",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "2048",
  "memory": "4096",
  "executionRoleArn": "arn:aws:iam::account:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::account:role/ecsTaskRole",
  "containerDefinitions": [
    {
      "name": "gold-seeker-api",
      "image": "your-account.dkr.ecr.region.amazonaws.com/gold-seeker:latest",
      "portMappings": [
        {
          "containerPort": 8000,
          "protocol": "tcp"
        }
      ],
      "environment": [
        {
          "name": "DB_HOST",
          "value": "your-rds-endpoint"
        },
        {
          "name": "REDIS_HOST",
          "value": "your-elasticache-endpoint"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/gold-seeker",
          "awslogs-region": "us-west-2",
          "awslogs-stream-prefix": "ecs"
        }
      }
    }
  ]
}
```

#### Lambdaéƒ¨ç½²

```python
# lambda_handler.py
import json
from gold_seeker import GoldSeeker

# åˆå§‹åŒ–Gold-Seekerï¼ˆå…¨å±€å˜é‡ï¼Œå†·å¯åŠ¨æ—¶åˆå§‹åŒ–ï¼‰
gs = GoldSeeker()

def lambda_handler(event, context):
    """Lambdaå¤„ç†å‡½æ•°"""
    try:
        # è§£æè¾“å…¥
        body = json.loads(event['body'])
        data = body['data']
        target_element = body['target_element']
        
        # æ‰§è¡Œåˆ†æ
        results = gs.quick_analyze(data, target_element)
        
        # è¿”å›ç»“æœ
        return {
            'statusCode': 200,
            'body': json.dumps(results.to_dict())
        }
        
    except Exception as e:
        return {
            'statusCode': 500,
            'body': json.dumps({'error': str(e)})
        }
```

### 2. Azureéƒ¨ç½²

#### Container Instances

```yaml
# azure-container.yaml
apiVersion: 2019-12-01
location: eastus
name: gold-seeker-group
properties:
  containers:
  - name: gold-seeker-api
    properties:
      image: yourregistry.azurecr.io/gold-seeker:latest
      resources:
        requests:
          cpu: 2.0
          memoryInGb: 4.0
      ports:
      - port: 8000
      environmentVariables:
      - name: DB_HOST
        value: your-database-server.postgres.database.azure.com
      - name: REDIS_HOST
        value: your-redis-cache.redis.cache.windows.net
  osType: Linux
  restartPolicy: Always
type: Microsoft.ContainerInstance/containerGroups
```

### 3. GCPéƒ¨ç½²

#### Cloud Run

```yaml
# cloudbuild.yaml
steps:
  # æ„å»ºDockeré•œåƒ
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'gcr.io/$PROJECT_ID/gold-seeker:$COMMIT_SHA', '.']
  
  # æ¨é€åˆ°Container Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'gcr.io/$PROJECT_ID/gold-seeker:$COMMIT_SHA']
  
  # éƒ¨ç½²åˆ°Cloud Run
  - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
    entrypoint: 'gcloud'
    args:
      - 'run'
      - 'deploy'
      - 'gold-seeker'
      - '--image=gcr.io/$PROJECT_ID/gold-seeker:$COMMIT_SHA'
      - '--region=us-central1'
      - '--platform=managed'
      - '--allow-unauthenticated'
      - '--memory=4Gi'
      - '--cpu=2'
```

## ğŸ”„ é›†ç¾¤éƒ¨ç½²

### 1. Kuberneteséƒ¨ç½²

#### Deploymenté…ç½®

```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gold-seeker-api
  labels:
    app: gold-seeker-api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: gold-seeker-api
  template:
    metadata:
      labels:
        app: gold-seeker-api
    spec:
      containers:
      - name: gold-seeker-api
        image: your-registry/gold-seeker:latest
        ports:
        - containerPort: 8000
        env:
        - name: DB_HOST
          valueFrom:
            secretKeyRef:
              name: gold-seeker-secrets
              key: db-host
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: gold-seeker-secrets
              key: db-password
        resources:
          requests:
            memory: "2Gi"
            cpu: "1000m"
          limits:
            memory: "4Gi"
            cpu: "2000m"
        livenessProbe:
          httpGet:
            path: /health
            port: 8000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /ready
            port: 8000
          initialDelaySeconds: 5
          periodSeconds: 5
```

#### Serviceé…ç½®

```yaml
# k8s/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: gold-seeker-api-service
spec:
  selector:
    app: gold-seeker-api
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8000
  type: ClusterIP
```

#### Ingressé…ç½®

```yaml
# k8s/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: gold-seeker-ingress
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
spec:
  tls:
  - hosts:
    - your-domain.com
    secretName: gold-seeker-tls
  rules:
  - host: your-domain.com
    http:
      paths:
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: gold-seeker-api-service
            port:
              number: 80
      - path: /
        pathType: Prefix
        backend:
          service:
            name: gold-seeker-web-service
            port:
              number: 80
```

### 2. Helm Chart

```yaml
# helm/gold-seeker/values.yaml
replicaCount: 3

image:
  repository: your-registry/gold-seeker
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80
  targetPort: 8000

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: your-domain.com
      paths:
        - path: /api
          pathType: Prefix
  tls:
    - secretName: gold-seeker-tls
      hosts:
        - your-domain.com

resources:
  limits:
    cpu: 2000m
    memory: 4Gi
  requests:
    cpu: 1000m
    memory: 2Gi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

database:
  host: postgres
  port: 5432
  name: gold_seeker
  user: gold_seeker
  password: ""

redis:
  host: redis
  port: 6379
  db: 0
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. ç›‘æ§é…ç½®

#### Prometheusé…ç½®

```yaml
# prometheus.yml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'gold-seeker'
    static_configs:
      - targets: ['gold-seeker-api:8000']
    metrics_path: /metrics
    scrape_interval: 5s

  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres-exporter:9187']

  - job_name: 'redis'
    static_configs:
      - targets: ['redis-exporter:9121']
```

#### Grafanaä»ªè¡¨æ¿

```json
{
  "dashboard": {
    "title": "Gold-Seekerç›‘æ§",
    "panels": [
      {
        "title": "APIè¯·æ±‚ç‡",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(http_requests_total[5m])",
            "legendFormat": "{{method}} {{endpoint}}"
          }
        ]
      },
      {
        "title": "å“åº”æ—¶é—´",
        "type": "graph",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))",
            "legendFormat": "95th percentile"
          }
        ]
      },
      {
        "title": "å†…å­˜ä½¿ç”¨",
        "type": "graph",
        "targets": [
          {
            "expr": "process_resident_memory_bytes / 1024 / 1024",
            "legendFormat": "Memory (MB)"
          }
        ]
      }
    ]
  }
}
```

### 2. æ—¥å¿—ç®¡ç†

#### ELK Stacké…ç½®

```yaml
# logstash.conf
input {
  beats {
    port => 5044
  }
}

filter {
  if [fields][service] == "gold-seeker" {
    json {
      source => "message"
    }
    
    date {
      match => [ "timestamp", "ISO8601" ]
    }
    
    if [level] == "ERROR" {
      mutate {
        add_tag => [ "error" ]
      }
    }
  }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "gold-seeker-%{+YYYY.MM.dd}"
  }
}
```

### 3. å¤‡ä»½ç­–ç•¥

```bash
#!/bin/bash
# backup.sh

# è®¾ç½®å˜é‡
BACKUP_DIR="/backup/gold-seeker"
DATE=$(date +%Y%m%d_%H%M%S)
DB_BACKUP_FILE="$BACKUP_DIR/db_$DATE.sql"
DATA_BACKUP_FILE="$BACKUP_DIR/data_$DATE.tar.gz"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®åº“
pg_dump -h postgres -U gold_seeker gold_seeker > $DB_BACKUP_FILE

# å¤‡ä»½æ•°æ®æ–‡ä»¶
tar -czf $DATA_BACKUP_FILE /var/lib/gold-seeker/data

# ä¸Šä¼ åˆ°äº‘å­˜å‚¨
aws s3 cp $DB_BACKUP_FILE s3://gold-seeker-backups/database/
aws s3 cp $DATA_BACKUP_FILE s3://gold-seeker-backups/data/

# æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™30å¤©ï¼‰
find $BACKUP_DIR -name "*.sql" -mtime +30 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +30 -delete

echo "å¤‡ä»½å®Œæˆ: $DATE"
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. SSL/TLSé…ç½®

```bash
# ç”ŸæˆSSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œ
0 12 * * * /usr/bin/certbot renew --quiet
```

### 2. é˜²ç«å¢™é…ç½®

```bash
# UFWé…ç½®
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

### 3. å®‰å…¨å¤´é…ç½®

```nginx
# Nginxå®‰å…¨å¤´
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header X-Content-Type-Options "nosniff" always;
add_header Referrer-Policy "no-referrer-when-downgrade" always;
add_header Content-Security-Policy "default-src 'self' http: https: data: blob: 'unsafe-inline'" always;
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–

```sql
-- PostgreSQLä¼˜åŒ–
-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_geochemical_data_location ON geochemical_data USING GIST (geometry);
CREATE INDEX idx_geochemical_data_au ON geochemical_data (au);

-- åˆ†åŒºè¡¨
CREATE TABLE geochemical_data_partitioned (
    LIKE geochemical_data INCLUDING ALL
) PARTITION BY RANGE (created_at);

-- æŸ¥è¯¢ä¼˜åŒ–
EXPLAIN ANALYZE SELECT * FROM geochemical_data WHERE au > 1.0;
```

### 2. ç¼“å­˜ä¼˜åŒ–

```python
# Redisç¼“å­˜é…ç½®
import redis
import json
from functools import wraps

redis_client = redis.Redis(host='redis', port=6379, db=0)

def cache_result(expiration=3600):
    """ç¼“å­˜è£…é¥°å™¨"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ç”Ÿæˆç¼“å­˜é”®
            cache_key = f"{func.__name__}:{hash(str(args) + str(kwargs))}"
            
            # å°è¯•ä»ç¼“å­˜è·å–
            cached_result = redis_client.get(cache_key)
            if cached_result:
                return json.loads(cached_result)
            
            # æ‰§è¡Œå‡½æ•°å¹¶ç¼“å­˜ç»“æœ
            result = func(*args, **kwargs)
            redis_client.setex(
                cache_key, 
                expiration, 
                json.dumps(result, default=str)
            )
            
            return result
        return wrapper
    return decorator
```

---

é€šè¿‡éµå¾ªæœ¬éƒ¨ç½²æŒ‡å—ï¼Œæ‚¨å¯ä»¥æˆåŠŸéƒ¨ç½²Gold-Seekerå¹³å°åˆ°å„ç§ç¯å¢ƒä¸­ï¼Œä»æœ¬åœ°å¼€å‘åˆ°å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒã€‚æ­£ç¡®çš„éƒ¨ç½²å’Œé…ç½®æ˜¯ç¡®ä¿å¹³å°ç¨³å®šè¿è¡Œçš„å…³é”®ã€‚