# Gold-Seeker 前端应用使用指南

## 🎯 概述

Gold-Seeker前端应用是基于Streamlit构建的金矿智能预测交互式界面，融合地质领域知识与先进大模型技术，提供直观的数据分析、可视化和AI智能体对话功能。

## 🚀 快速开始

### 1. 环境准备

```bash
# 创建虚拟环境（推荐）
python -m venv gold-seeker-frontend
source gold-seeker-frontend/bin/activate  # Linux/Mac
# gold-seeker-frontend\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements-streamlit.txt
```

### 2. 启动应用

#### 方法一：使用启动脚本（推荐）
```bash
python run_app.py
```

#### 方法二：直接使用Streamlit
```bash
streamlit run app.py
```

#### 方法三：自定义参数启动
```bash
streamlit run app.py --server.port 8501 --server.address localhost
```

### 3. 访问应用

打开浏览器访问：http://localhost:8501

## 📋 功能特性

### 🤖 Agent Chat（智能对话）
- **自然语言交互**：支持中文和英文查询
- **实时响应**：模拟Agent的思考过程和回复
- **对话历史**：保存完整的对话记录
- **智能分析**：支持相关性、异常、聚类、预测等查询

### 📊 Data & R-mode Analysis（数据分析）
- **数据预览**：表格形式展示原始数据
- **统计信息**：描述性统计和分布特征
- **相关性热力图**：元素间相关性可视化
- **R型聚类树状图**：层次聚类分析结果
- **PCA载荷图**：主成分分析载荷向量

### 🗺️ Spatial & Anomaly（空间分析）
- **交互式地图**：基于Folium的地理信息展示
- **C-A分形分析**：浓度-面积双对数拟合
- **异常识别**：自动阈值检测和异常区域标注
- **空间统计**：异常样品数量和比例统计

## 🎨 界面设计

### 侧边栏配置
- **数据上传**：支持CSV和GeoJSON格式
- **示例数据**：一键生成模拟数据
- **参数设置**：目标矿种和分析元素选择
- **Agent初始化**：启动智能分析功能

### 主界面布局
- **宽屏模式**：充分利用屏幕空间
- **标签页设计**：功能模块清晰分离
- **响应式布局**：适配不同屏幕尺寸
- **地质主题**：金矿/地质风格配色

## 📊 数据格式要求

### CSV格式
```csv
X,Y,Au,As,Sb,Hg,Cu,Pb,Zn,Ag,Is_Deposit
100.5,200.3,0.12,1.5,0.8,0.05,25.6,15.2,0.08,0
101.2,201.1,2.45,8.3,3.2,0.12,45.8,28.9,0.15,1
...
```

### 必需字段
- **X, Y**：坐标信息（经纬度或投影坐标）
- **元素列**：Au, As, Sb, Hg等地球化学元素
- **Is_Deposit**（可选）：已知矿点标签（1=矿点，0=非矿点）

### 数据质量要求
- 样本数量：建议 > 50个
- 元素覆盖：至少包含目标矿种
- 坐标系统：建议使用WGS84或UTM
- 数值范围：非负值，合理浓度范围

## 🔧 高级功能

### 自定义样式
应用使用自定义CSS样式，提供：
- 渐变背景色
- 地质主题配色
- 响应式布局
- 交互式动画效果

### 数据处理
- **缺失值处理**：自动检测和处理
- **异常值检测**：基于统计方法
- **数据标准化**：为分析做准备
- **坐标转换**：支持多种坐标系

### 可视化选项
- **交互式图表**：支持缩放、平移、悬停
- **多图表联动**：数据同步更新
- **导出功能**：图表和数据导出
- **主题切换**：明暗主题支持

## 🛠️ 开发指南

### 项目结构
```
Gold-Seeker/
├── app.py                 # 主应用文件
├── run_app.py            # 启动脚本
├── requirements-streamlit.txt  # 前端依赖
├── FRONTEND_README.md    # 前端说明文档
└── agents/              # 后端智能体模块
```

### 扩展功能
1. **添加新的分析模块**
   - 在`app.py`中添加新的函数
   - 在主界面中添加对应的UI组件
   - 更新session state管理

2. **集成真实Agent**
   - 替换`mock_agent_response`函数
   - 集成`SpatialAnalystAgent`
   - 添加错误处理和进度显示

3. **自定义可视化**
   - 使用Plotly创建交互式图表
   - 添加地图图层控制
   - 实现数据筛选和过滤

### 性能优化
- **数据缓存**：使用`st.cache_data`缓存计算结果
- **懒加载**：按需加载大型数据集
- **异步处理**：长时间运行任务的后台处理
- **内存管理**：及时释放不需要的数据

## 🔍 故障排除

### 常见问题

1. **应用启动失败**
   - 检查Python版本（需要3.8+）
   - 确认所有依赖已安装
   - 检查端口是否被占用

2. **数据加载错误**
   - 验证文件格式是否正确
   - 检查必需字段是否存在
   - 确认数据编码为UTF-8

3. **地图显示异常**
   - 检查坐标数据是否有效
   - 确认网络连接正常
   - 尝试刷新页面

4. **图表渲染问题**
   - 清除浏览器缓存
   - 检查数据格式
   - 查看控制台错误信息

### 调试模式
```bash
# 启用调试模式
streamlit run app.py --logger.level debug

# 查看详细日志
streamlit run app.py --server.fileWatcherType none
```

## 📱 移动端支持

应用支持移动端访问，但建议：
- 使用平板或大屏手机
- 横屏模式获得更好体验
- 连接WiFi网络以提高性能

## 🔒 安全考虑

- **数据隐私**：所有数据在本地处理
- **无外部依赖**：不向第三方服务发送数据
- **会话隔离**：每次重启清空数据
- **输入验证**：防止恶意输入

## 📈 未来计划

### 短期目标
- [ ] 集成真实的SpatialAnalystAgent
- [ ] 添加更多可视化选项
- [ ] 支持更多数据格式
- [ ] 优化移动端体验

### 长期目标
- [ ] 用户认证系统
- [ ] 项目保存和分享
- [ ] 协作分析功能
- [ ] 云端部署支持

## 🤝 贡献指南

欢迎贡献代码和建议：
1. Fork项目仓库
2. 创建功能分支
3. 提交代码更改
4. 创建Pull Request

## 📞 技术支持

如遇问题，请：
1. 查看本文档的故障排除部分
2. 检查GitHub Issues
3. 联系开发团队

---

**Gold-Seeker Frontend** - 让地球化学分析更直观、更智能！