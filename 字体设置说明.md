# Gold-Seeker 中文字体设置说明

## 📋 字体配置概述

为了解决可视化分析部分的中文字体显示问题，我们对Gold-Seeker平台进行了全面的字体配置，确保所有图表都能正确显示中文字符。

## 🔧 字体设置详情

### 1. Matplotlib 字体配置

```python
# 设置matplotlib中文字体
plt.rcParams['font.sans-serif'] = ['Microsoft YaHei', 'SimHei', 'FangSong', 'SimSun']
plt.rcParams['axes.unicode_minus'] = False  # 解决负号显示问题
plt.rcParams['font.size'] = 10
plt.rcParams['axes.titlesize'] = 14
plt.rcParams['axes.labelsize'] = 12
plt.rcParams['xtick.labelsize'] = 10
plt.rcParams['ytick.labelsize'] = 10
```

**字体优先级**：
1. Microsoft YaHei (微软雅黑) - 首选字体
2. SimHei (黑体) - 备选字体
3. FangSong (仿宋) - 备选字体
4. SimSun (宋体) - 备选字体

### 2. Seaborn 字体配置

```python
# 设置seaborn中文字体
sns.set_style('whitegrid')
sns.set_palette('husl')
```

### 3. Plotly 字体配置

```python
# 设置Plotly中文字体
import plotly.io as pio
pio.templates.default = "plotly_white"

font_config = {
    'family': 'Microsoft YaHei, SimHei, FangSong, SimSun, Arial',
    'size': 12,
    'color': '#333333'
}
```

## 🎯 修复的图表类型

### 1. 相关性热力图
- **标题**: 元素相关性热力图
- **坐标轴**: 元素名称
- **注释**: 相关系数值

### 2. R型聚类树状图
- **标题**: R型聚类树状图
- **X轴**: 元素
- **Y轴**: 距离
- **标签**: 元素名称

### 3. PCA载荷图
- **标题**: PCA载荷图
- **X轴**: PC1 (方差解释比例)
- **Y轴**: PC2 (方差解释比例)
- **标签**: 元素名称

### 4. C-A分形分析图
- **标题**: 元素 C-A分形分析
- **X轴**: log(浓度)
- **Y轴**: log(面积)
- **图例**: 背景拟合、异常拟合、阈值

## 🖥️ 系统字体检测

通过字体检测脚本，确认系统中可用的中文字体包括：
- Microsoft YaHei (微软雅黑)
- SimHei (黑体)
- FangSong (仿宋)
- SimSun (宋体)
- STFangsong (华文仿宋)
- Microsoft Himalaya
- Microsoft JhengHei (微软正黑体)
- 等其他字体

## 🚀 使用方法

### 1. 启动应用
```bash
cd D:\Desktop\Gold-Seeker
python -m streamlit run app.py --server.port 8511 --server.address 0.0.0.0
```

### 2. 测试字体
```bash
python check_font.py  # 检查系统字体
python test_font.py   # 测试字体效果
```

### 3. 访问应用
在浏览器中打开：http://localhost:8511

## 🔍 字体验证

### 验证步骤
1. 启动应用
2. 进入"Data & R-mode Analysis"标签页
3. 点击"使用示例数据"
4. 查看各个图表中的中文显示

### 预期效果
- 所有中文标题正常显示
- 坐标轴标签清晰可读
- 图例文字完整显示
- 无方框或乱码现象

## 🛠️ 故障排除

### 问题1：中文字体显示为方框
**解决方案**：
1. 检查系统是否安装Microsoft YaHei字体
2. 运行`python check_font.py`检查可用字体
3. 更新字体优先级配置

### 问题2：负号显示异常
**解决方案**：
- 已设置`plt.rcParams['axes.unicode_minus'] = False`
- 如仍有问题，可尝试其他负号显示设置

### 问题3：字体大小不合适
**解决方案**：
- 调整`plt.rcParams['font.size']`参数
- 修改各个图表的fontsize设置

## 📝 注意事项

1. **字体兼容性**: 配置了多个备选字体，确保在不同系统上都能正常显示
2. **性能优化**: 字体设置在应用启动时一次性完成，避免重复配置
3. **一致性**: Matplotlib、Seaborn、Plotly使用统一的字体配置
4. **可维护性**: 字体配置集中在应用开头，便于后续调整

---

**更新时间**: 2025-12-10  
**版本**: v1.2.0  
**更新内容**: 全面优化中文字体显示